import{aK as b,r as i,j as e,B as N,aY as y,aH as d}from"./index-leeD8V8Y.js";import{C as E,d as C,e as I,L as R,f as L,g as u,b as g,I as h,h as P,a as A,i as S}from"./card-BnYluhif.js";import{L as F,A as T}from"./AuthHero-C7-HS6CQ.js";const $="https://postonredditserver.vercel.app";function q(){const r=b(),[n,l]=i.useState(""),[o,x]=i.useState(""),[c,m]=i.useState(""),j=async()=>{const a=z(n,o,c);if(a.length<=0)try{const t=await A.post(`${$}/auth/registration`,{name:n,email:o,password:c},{headers:{"Content-Type":"application/json"}});if(t.status===400){p("Invalid credentials",t.status);return}t.status===200&&k(t.data.token)}catch(t){console.error("CLIENT: Errore generico del server",t.stack),p("Server error. Please try again later",t.status)}else a.map(t=>{d.warning(t)})},z=(a,t,f)=>{const s=[],v=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/,w=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[\W_]).{6,}$/;return a.trim()||s.push("Name can't be empty"),t.trim()?v.test(t)||s.push("Email is not valid"):s.push("Email can't be empty"),f.length<6?s.push("Password must be at least 6 characters"):w.test(f)||s.push("Password must contain at least one letter, one number, and one special character"),s},p=(a,t)=>{console.error(`CLIENT: Error status: ${t}`),d.warning(a),l(""),x(""),m("")},k=a=>{localStorage.setItem("authToken",a),d.success("Registration successful"),r("/")};return e.jsxs(E,{className:"flex flex-col gap-y-1 bg-background shadow-elevation3 shadow-md w-[90%] md:w-1/2 bg-zinc-100 dark:bg-zinc-700",children:[e.jsxs(C,{className:"flex justify-center items-center w-full",children:[e.jsx(I,{children:e.jsx(R,{})}),e.jsx(L,{className:"text-zinc-500 dark:text-zinc-300",children:"Welcome to PostOnReddit!"})]}),e.jsxs(u,{className:"flex flex-col gap-y-2",children:[e.jsx(g,{htmlFor:"registrationNameInput",children:"Full Name"}),e.jsx(h,{"aria-label":"input-name-registration",id:"registrationNameInput",type:"text",placeholder:"Enter your full name",required:!0,value:n,onChange:a=>l(a.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder:text-zinc-700 dark:placeholder:text-zinc-500"})]}),e.jsxs(u,{className:"flex flex-col gap-y-2",children:[e.jsx(g,{htmlFor:"registrationEmailInput",children:"Email Address"}),e.jsx(h,{"aria-label":"input-email-registration",id:"registrationEmailInput",type:"email",placeholder:"Enter your email",required:!0,value:o,onChange:a=>x(a.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder:text-zinc-700 dark:placeholder:text-zinc-500"})]}),e.jsxs(u,{className:"flex flex-col gap-y-2",children:[e.jsx(g,{htmlFor:"registrationPasswordInput",children:"Password"}),e.jsx(h,{"aria-label":"input-password-registration",id:"registrationPasswordInput",type:"password",placeholder:"••••••••",required:!0,value:c,onChange:a=>m(a.target.value),className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder:text-zinc-700 dark:placeholder:text-zinc-500"})]}),e.jsxs(P,{className:"flex flex-col gap-y-2",children:[e.jsxs(N,{"aria-label":"button-registration",type:"submit",className:"w-full bg-orange-500 dark:bg-orange-500 hover:bg-orange-600 dark:hover:bg-orange-600 text-zinc-50 dark:text-zinc-50",onClick:()=>j(),children:[e.jsx(F,{})," Register a New Account"]}),e.jsxs(y,{to:"/login",className:"text-foreground",children:["Already have an account? ",e.jsx("span",{className:"hover:text-orange-500",children:"Log in here"})]})]})]})}function V(){const r=b();return i.useEffect(()=>{(async()=>{await S()&&r("/")})()},[r]),e.jsxs("div",{className:"w-screen h-svh flex flex-col md:flex-row bg-zinc-100 dark:bg-zinc-800",children:[e.jsx("div",{className:"w-screen md:w-1/2 h-svh flex flex-col items-center justify-center",children:e.jsx(q,{})}),e.jsx(T,{})]})}export{V as default};
